{"version":3,"sources":["assets/js/slot.js"],"names":["$","document","ready","winCounter","$repeatButton","$popupWin","$popupLoose","$galleryItem","$win","$loose","countDownTimer","on","e","preventDefault","wl_shared","registerUser","val","focus","text","window","uloginAuthCb","token","addClass","removeClass","click","trigger","hasClass","$this","addMistakeText","setTimeout","popupHide","randomGallerySort","seconds","$clock","startNumber","animate","opacity","clockId","setInterval","clearInterval","popupShow","elem","fadeIn","postHits","fadeOut","element","append","empty","clearWinParams","parent","randomNumber","compareRandom","a","b","Math","random","sort"],"mappings":"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","file":"slot.js","sourcesContent":["$(document).ready(function () {\n\n    var winCounter = 0,\n        $repeatButton = $('.repeat-button'),\n        $popupWin = $('#popup'),\n        $popupLoose = $('#popup-warning'),\n        $galleryItem = $('.gallery-item'),\n        $win = $('.win'),\n        $loose = $('.loose');\n\n    countDownTimer();\n\n    // -------- EMAIL VALIDATION AND ULOGIN FUNCTIONS\n    $('#email-form').on('submit', function (e) {\n        e.preventDefault();\n        wl_shared.registerUser($('.email-input').val());\n    });\n\n    $('.email-input').focus(function () {\n        $('.error-text').text('');\n    });\n\n    window.uloginAuthCb = function (token) {\n        \n    };\n\n    // ---------------- CUSTOM FUNCTIONS\n    $galleryItem.on({\n        'win': function () {\n            $(this).addClass('right-choice');\n        },\n        'loose': function () {\n            $(this).addClass('wrong-choice');\n        },\n        'cancelLoose': function () {\n            $(this).removeClass('wrong-choice');\n        }\n    });\n\n    $win.click(function () {\n        $(this).trigger('win');\n        winCounter++;\n    });\n\n    $loose.click(function () {\n\n        if (!$(this).hasClass('wrong-choice')) {\n            var $this = $(this);\n            $this.trigger('loose');\n            addMistakeText($this);\n\n            setTimeout(function () {\n                $this.trigger('cancelLoose');\n            }, 2000);\n        }\n    });\n\n    $repeatButton.click(function () {\n        popupHide($popupLoose);\n        randomGallerySort();\n        countDownTimer();\n    });\n\n    function countDownTimer() {\n        var seconds = 60,\n            $clock = $('.clock'),\n            startNumber = $('.clock p');\n\n        startNumber.text(\"00:01:00\");\n\n        $clock.animate({opacity: 1}, 1750);\n\n        var clockId = setInterval(function () {\n            seconds--;\n\n            if (seconds < 0) {\n                clearInterval(clockId);\n                popupShow($popupLoose);\n            }\n            else if (winCounter === 3) {\n                clearInterval(clockId);\n                startNumber.text(\"00:00:0\");\n                popupShow($popupWin);\n            }\n            else {\n                startNumber.text(\"00:00:\" + seconds);\n            }\n        }, 1000);\n    }\n\n    function popupShow(elem) {\n        elem.fadeIn();\n        wl_shared.postHits(true);\n    }\n\n    function popupHide(elem) {\n        elem.fadeOut();\n    }\n\n    function addMistakeText(elem) {\n        var element = elem;\n\n        element.append('<p>Неверно</p>');\n\n        setTimeout(function () {\n            element.empty();\n        }, 2000);\n    }\n\n    function clearWinParams() {\n        $win.removeClass('right-choice');\n        winCounter = 0;\n    }\n\n    function randomGallerySort() {\n\n        var parent = $('.gallery'),\n            randomNumber = 0.5;\n\n        clearWinParams();\n\n        function compareRandom(a, b) {\n            return Math.random() - randomNumber;\n        }\n\n        $galleryItem.sort(compareRandom);\n\n        parent.append($galleryItem);\n    }\n});"]}